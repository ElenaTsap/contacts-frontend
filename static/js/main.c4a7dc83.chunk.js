(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(19),s=n.n(o),r=(n(27),n(28),n(17)),i=n(22),l=n(9),u=(n(29),n(0)),d=function(e){var t=e.updater,n=e.contact,c=e.deleteContact,o=Object(a.useState)(!1),s=Object(l.a)(o,2),r=s[0],i=s[1],d=n.fullName,j=n.email,h=n.phone,p=n.address,b=n.avatar,f=Object(a.useState)("rgba(173, 174, 247, 0.342)"),m=Object(l.a)(f,2),g=m[0],O=m[1],x={_id:n._id},v=function(e){var t,n=e.target.getAttribute("data-id");t="file"==n?e.target.files[0]:e.target.innerText,x[n]=t},y=function(e){console.log("input",e),13==e.charCode&&e.preventDefault()};return Object(u.jsxs)("div",{className:"card",style:{backgroundColor:g},children:[r?Object(u.jsx)("input",{"data-id":"file",type:"file",onChange:v}):Object(u.jsx)("img",{src:"https://contact-list-backend-2021.herokuapp.com/avatars/"+b}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"name: \xa0"}),Object(u.jsx)("p",{"data-id":"fullName",onKeyPress:y,onBlur:v,contentEditable:r,children:d})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"email: \xa0"}),Object(u.jsx)("p",{"data-id":"email",onKeyPress:y,onBlur:v,contentEditable:r,children:j})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"phone: \xa0"}),Object(u.jsx)("p",{"data-id":"phone",onKeyPress:y,onBlur:v,contentEditable:r,children:h})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:"address: \xa0"}),Object(u.jsx)("p",{"data-id":"address",onKeyPress:y,onBlur:v,contentEditable:r,children:p})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){i(!r),O(r?"rgba(173, 174, 247, 0.342)":"gray")},children:"Edit"}),Object(u.jsx)("button",{onClick:function(){console.log(x);var e=new FormData;Object.keys(x).forEach((function(t){e.append(t,x[t])}));var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:e};fetch("https://contact-list-backend-2021.herokuapp.com/contacts/update",n).then((function(e){return e.json().then((function(e){"success"===e.status?(i(!1),O("green"),setTimeout((function(){O("rgba(173, 174, 247, 0.342)")}),1e3),e.data.avatar&&(console.log(e.data),t(e.data._id,e.data.avatar))):(O("coral"),alert(e.message.message))}))})).catch((function(e){return O("coral")}))},children:"Save"}),Object(u.jsx)("button",{onClick:c,children:"Delete"})]})]})},j=(n(31),n(2));var h=function(){var e=Object(j.f)(),t=Object(a.useState)({fullName:"",email:"",phone:"",address:""}),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)([]),h=Object(l.a)(s,2),p=h[0],b=h[1];Object(a.useEffect)((function(){localStorage.getItem("token")||e.push("/auth")}));var f={"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},m=function(e,t){var n=Object(i.a)({},c);n[t]=e.target.value,o(n)};Object(a.useEffect)((function(){fetch("https://contact-list-backend-2021.herokuapp.com/contacts/all",{headers:f}).then((function(e){return e.json().then((function(e){"success"===e.status?b(e.data):console.log(e.message)}))}))}),[]);var g,O=function(e,t){var n=Object(r.a)(p),a=n.findIndex((function(t){return t._id===e}));n[a].avatar=t,b(n)};return"object"===typeof p&&p.length>0&&(g=p.map((function(e){return Object(u.jsx)(d,{updater:O,contact:e,deleteContact:function(){return t=e._id,void fetch("https://contact-list-backend-2021.herokuapp.com/contacts/"+t,{method:"DELETE",headers:f}).then((function(e){return e.json().then((function(e){if("success"===e.status){alert(e.message);var t=p.filter((function(t){if(t._id!=e.data)return t}));b(t)}else alert("theres an error! please check console"),console.log(e.message)}))})).catch((function(e){return alert(e)}));var t}},e._id)}))),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"My Contact List"}),Object(u.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("fullName",c.fullName),t.append("email",c.email),t.append("phone",c.phone),t.append("address",c.address),t.append("file",e.target[4].files[0]),console.log(t);var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:t};fetch("https://contact-list-backend-2021.herokuapp.com/contacts/new",n).then((function(e){return e.json().then((function(e){e.errors?alert(" ".concat(e.message," ")):b([].concat(Object(r.a)(p),[e]))}))})).catch((function(e){return console.log(e)}))},children:[Object(u.jsx)("input",{placeholder:"Full name",required:!0,value:c.fullName,onChange:function(e){return m(e,"fullName")}}),Object(u.jsx)("input",{placeholder:"Email",type:"email",value:c.email,onChange:function(e){return m(e,"email")}}),Object(u.jsx)("input",{placeholder:"Phone number",type:"tel",value:c.phone,onChange:function(e){return m(e,"phone")}}),Object(u.jsx)("input",{placeholder:"Address",value:c.address,onChange:function(e){return m(e,"address")}}),Object(u.jsx)("input",{type:"file"}),Object(u.jsx)("button",{children:"Create Contact"})]}),Object(u.jsx)("section",{className:"card-section",children:g})]})},p=(n(37),function(e){var t=Object(j.f)();return Object(u.jsx)("div",{className:"wrapper",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={};n.email=e.target[0].value,n.pass=e.target[1].value;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"==e.nativeEvent.submitter.id?fetch("https://contact-list-backend-2021.herokuapp.com/auth/register",a).then((function(e){return e.json().then((function(e){return console.log(e.message)}))})):"login"==e.nativeEvent.submitter.id&&fetch("https://contact-list-backend-2021.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){console.log(e),localStorage.setItem("token",e.token),t.push("/contacts")}))}))},children:[Object(u.jsx)("h2",{children:"Login or Register"}),Object(u.jsx)("input",{name:"email",type:"email"}),Object(u.jsx)("input",{name:"pass",type:"password"}),Object(u.jsxs)("section",{children:[Object(u.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(u.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})}),b=n(21),f=(n(38),function(){return Object(u.jsxs)("div",{className:"get-contact",children:[Object(u.jsx)("h1",{children:"Contact Us"}),Object(u.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),console.log(e.target[4].files);var t=new FormData;t.append("fullName",e.target[0].value),t.append("email",e.target[1].value),t.append("phone",e.target[2].value),t.append("message",e.target[3].value),Array.from(e.target[4].files).forEach((function(e){t.append("attachments",e)}));var n,a=Object(b.a)(t.values());try{for(a.s();!(n=a.n()).done;){var c=n.value;console.log(c)}}catch(o){a.e(o)}finally{a.f()}console.log(Object.fromEntries(t));fetch("https://contact-list-backend-2021.herokuapp.com/get-contact",{method:"POST",body:t}).then((function(e){return e.json().then((function(e){"success"===e.status?alert("Congrats, your message was successfully sent!"):alert(e.message),console.log(e)}))}))},children:[Object(u.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(u.jsx)("input",{type:"email",placeholder:"Email"}),Object(u.jsx)("input",{type:"tel",placeholder:"Phone"}),Object(u.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(u.jsx)("input",{type:"file",multiple:!0}),Object(u.jsx)("button",{children:"Send message"})]})]})});var m=function(){return Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{path:"/auth",children:Object(u.jsx)(p,{})}),Object(u.jsx)(j.a,{path:"/contacts",children:Object(u.jsx)(h,{})}),Object(u.jsx)(j.a,{path:"/get-contact",children:Object(u.jsx)(f,{})}),Object(u.jsx)(j.a,{path:"/",children:Object(u.jsx)(p,{})})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))},O=n(10);s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(O.a,{basename:"/contacts-frontend",children:Object(u.jsx)(m,{})})}),document.getElementById("root")),g()}},[[39,1,2]]]);
//# sourceMappingURL=main.c4a7dc83.chunk.js.map